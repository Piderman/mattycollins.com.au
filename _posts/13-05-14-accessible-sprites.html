---
layout : default
title: Accessible Sprites
tags: accessibility sprite sass mixin
excerpt : A SASS mixin and method for getting image sprites to appear in Windows High Contrast mode for accessibility
---
<p><ins>Edit : After some googles it turns out <a href="http://blog.paciellogroup.com/2010/01/high-contrast-proof-css-sprites/">this guy</a> had the same idea a while ago. Well this is awkward&hellip;</ins></p>

<p>I have worked on two rather big WCAG 2.0 sites in the last year and by far the hardest thing was figuring out how to get my icons showing up in high contrast mode. My go-to technique would have been using Font Awesome, but I didn't have enough understanding of its use in accessibility to use it site-wide. We went with ye olde' image-based sprites.</p>

<h2><abbr title="Too long; didn't read?">TL;DR</abbr>:</h2>
<p><a href="http://codepen.io/Giraffe/details/elCDH">Shee this pen</a>. AA Sprites without the need for an image to exist in the DOM, bam!</p>

<p>The first round of accessibility testing came, and all our icons failed. A solution recommend to us was to have the icon in the DOM as an image, but this site had around 50 icons and i was against doing this. It would have been a nightmare to manage (think of all the hover state changes) let alone the performance hit of all the additional request. Luckily I came across <a href="http://hardlikesoftware.com/weblog/2009/11/04/css-sprites-vs-high-contrast-mode/">this article</a> which showed me how I could still use the awesomeness of sprites while still make the site accessible.</p>

<p>So that was that, but after another project, having the image in the DOM was becoming harder and harder to maintain. I was not liking the amount of duplication. I tried referencing the sprite file via a pseudo elements <code>content</code> property, which did work for high contrast but I couldn't show only the icon I wanted. A few months later I revisited this method and extended my mixin for sprites to work on a single element (applies the sizing and clipping) with a before element (loads the image and adjust the offset).</p>

<h2>The mixin</h2>
{% highlight sass %}
@mixin sprite($coordinates, $dimensions, $aaMode : false) {

  //box dimensions go on the current element regardless
  width: nth($dimensions, 1);
  height: nth($dimensions, 2);
  
  @if $aaMode != false {

    //position the sprite background image
    background-position: nth($coordinates, 1) nth($coordinates, 2);
  } @else {

    //offset the image
    &:before {
      left: nth($coordinates, 1);
      top: nth($coordinates, 2);
    }
  }
}
{% endhighlight  %}

<h2>Helper Classes</h2>
<p>Along with the mixin, I have the following helper class to automagically setup base sprites for me, so all i have to do it call the mixin. All my sprites will have the same background image ready to be positioned, and all my accessible ones will have the image loaded via content, positioned absolutely and clipped by the relative single element.</p>

{% highlight css %}
.sprite, .sprite--contrast { display: inline-block; }

.sprite { background-image: url("path/to/sprite.png") }

.sprite--contrast {
  posistion: relative;
  overflow: hidden;
}

.sprite--contrast:before {
  position: absolute;
  content : url("path/to/sprite.png");
}
{% endhighlight  %}